# Relasi antar Tabel

Kali ini, saya akan mengimplementasikan relasi tabel yang sebelumnya saya sudah pelajari dalam materi berikut pada kasus toko online: [relasi tabel](https://github.com/ferdyansahalfariz/belajar-SQL/blob/main/1.%20Membuat%20Relasi%20Tabel.md).

Adapun didalamnya terdapat 9 tabel yang membentuk sejumlah relasi baik itu one to many maupun many to one. Pada implementasi di graphql via hasura, langkah pertama yang diperlukan yaitu membuat tabel dengan field yang sesuai dengan studi kasus toko online tersebut. Pertama masuk pada bagian Data, pilih database dan skema yang digunakan (pada kasus ini digunakan database postgres dan skema public), lalu add tabel dan isi kolom yang diminta berikut:

![image](https://github.com/ferdyansahalfariz/belajar-hasura/assets/96871156/187e6cdf-2440-4db7-89b9-9f92f9164d70)

termasuk pada bagian constrain yang mana akan di cek valuenya sebelum data dimasukan ke kolom tersebut, disini saya menerapkannya pada kolom `email` di tabel `users` yang mana diharusnya memasukan format email yang benar sebelum insert valuenya. 

![image](https://github.com/ferdyansahalfariz/belajar-hasura/assets/96871156/d20d777e-b879-4f20-9894-f0e24a89a8a1)

### Foreign Key

Pada saat add table, tidak lupa juga mencantumkan foreign key sebagai referensi yang digunakan dari primary key di tabel asal ke kolom yang dihubungkan menjadi foreign key agar relasi tabel dapat terjadi dan data yang masuk konsisten. Berikut adalah contoh pengisiannya:

![image](https://github.com/ferdyansahalfariz/belajar-hasura/assets/96871156/d29a3ab8-b291-4b99-a44a-5f07bf1e45aa)

### Relationship

Setelah membentuk semua table yang diinginkan, relasi antar table belum langsung terbuat, untuk membuatnya, masuk ke menu relationship pada tabel yang diinginkan. Disana akan diberikan saran relationship hasil dari pembuatan foreign key sebelumnya yang mana dapat langsung di track relationshipnya dengan memberinya nama relationshipnya, lalu klik track relationship. Lakukan pada setiap tabel untuk membuat relasi antar tabel secara keseluruhan, selain itu relationship juga dapat dibuat secara manual terlepas dari saran yang diberikan dari hasuranya sendiri pada bagian `add relationship`. Berikut adalah contoh suggest relationship yang disarankan:

![image](https://github.com/ferdyansahalfariz/belajar-hasura/assets/96871156/118b610b-1d42-4ae4-80a0-10fa20bfcab6)

Dan berikut adalah contoh hasil pada bagian relationship setelah dibentuk relasi pada tabel yang terhubung:

![image](https://github.com/ferdyansahalfariz/belajar-hasura/assets/96871156/a1cf8498-c6c8-49d6-a741-635d307ebae5)

```
get languages and users
query MyQuery {
  languages {
    id
    language_name
    users {
      id
      username
    }
  }
}
```
